<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>生产追踪系统</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: inline-block;
            width: 120px;
            font-weight: bold;
        }
        select, input {
            padding: 8px;
            width: 250px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .file-info {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>生产追踪系统</h1>
    
    <div class="file-info">
        <h3>文件信息</h3>
        <p id="filename"></p>
    </div>
    
    <form id="trackerForm">
        <div class="form-group">
            <label for="personnel1">负责人 1：</label>
            <select id="personnel1" name="personnel1" required>
                <option value="">-- 请选择 --</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="personnel2">负责人 2：</label>
            <select id="personnel2" name="personnel2">
                <option value="">-- 请选择 --</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="notes">备注：</label>
            <input type="text" id="notes" name="notes">
        </div>
        
        <button type="submit">提交</button>
    </form>

    <script>
        // 解析URL参数
        function parseUrlParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                file: decodeURIComponent(params.get('file') || ''),
                personnel: (params.get('personnel') || '').split(','),
                personnel2: (params.get('personnel2') || '').split(',')
            };
        }

        // 初始化页面
        function initPage() {
            const { file, personnel, personnel2 } = parseUrlParams();
            
            // 显示文件信息
            document.getElementById('filename').textContent = file || '无文件信息';
            
            // 填充人员下拉框
            fillDropdown('personnel1', personnel);
            fillDropdown('personnel2', personnel2);
            
            // 表单提交处理
            document.getElementById('trackerForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = {
                    personnel1: document.getElementById('personnel1').value,
                    personnel2: document.getElementById('personnel2').value,
                    notes: document.getElementById('notes').value,
                    fileInfo: file
                };
                alert('提交成功:\n' + JSON.stringify(formData, null, 2));
                // 这里可以添加AJAX提交逻辑
            });
        }

        // 填充下拉框
        function fillDropdown(elementId, items) {
            const dropdown = document.getElementById(elementId);
            items.forEach(item => {
                if (item.trim()) {
                    const option = document.createElement('option');
                    option.value = item;
                    option.textContent = item;
                    dropdown.appendChild(option);
                }
            });
        }

        // 页面加载时初始化
        window.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>
